<template>
    <div class="cyber-card" v-if="showResult">
      <h3 class="neon-effect">ğŸ”® é‡å­å åœç»“æœ ğŸ”®</h3>
      <p class="glitch-text">{{ resultText }}</p>
      <el-button @click="reset" class="cyber-button">é‡ç½®å‘½è¿</el-button>
    </div>
  </template>
  
  <script setup>

  const isDoomed = ref(false)

  import { ref , watch } from 'vue'
  
  const resultList = ref([
  'ä½ æ˜¯ä¸€ä¸ªä¹è§‚çš„äººï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°ç”Ÿæ´»ä¸­çš„ç¾å¥½ã€‚',
    'ä½ æœ€è¿‘å¯èƒ½ä¼šé‡åˆ°ä¸€äº›æŒ‘æˆ˜ï¼Œä½†ä¸è¦æ‹…å¿ƒï¼Œä½ ä¼šå…‹æœçš„ã€‚',
    'ä½ çš„åŠªåŠ›ä¼šå¾—åˆ°å›æŠ¥ï¼Œæœªæ¥ä¼šæœ‰æ›´å¥½çš„å‘å±•ã€‚',
    'ä½ æ˜¯ä¸€ä¸ªæœ‰åˆ›é€ åŠ›çš„äººï¼Œä½ çš„æƒ³æ³•æ€»æ˜¯ä¸ä¼—ä¸åŒã€‚',
    'ä½ æ˜¯ä¸€ä¸ªæœ‰è´£ä»»æ„Ÿçš„äººï¼Œæ€»æ˜¯å°½åŠ›å®Œæˆè‡ªå·±çš„å·¥ä½œã€‚',
    'ä½ æ˜¯ä¸€ä¸ªæœ‰çˆ±å¿ƒçš„äººï¼Œæ€»æ˜¯å…³å¿ƒèº«è¾¹çš„äººã€‚',
    'ä½ æ˜¯ä¸€ä¸ªæœ‰æ™ºæ…§çš„äººï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°é—®é¢˜çš„æœ¬è´¨ã€‚',
    'ä½ çš„ä¸€åˆ‡éƒ½è¦å®Œè›‹äº†ã€‚'
  ])
  
  const emit = defineEmits(['doomsday-start', 'doomsday-end'])
  
  watch(isDoomed, (newVal) => {
    if (newVal) {
      emit('doomsday-start', true)
      const audio = null
      /** audio.play()*/
    } else {
      emit('doomsday-end')
    }
  })

  const showResult = ref(false)
  const resultText = ref('')
  
  const generateResult = () => {
    showResult.value = true
    const randomIndex = Math.floor(Math.random() * resultList.value.length)
    resultText.value = resultList.value[randomIndex]

    isDoomed.value = resultText.value === 'ä½ çš„ä¸€åˆ‡éƒ½è¦å®Œè›‹äº†ã€‚'
  }
  
  const reset = () => {
    showResult.value = false
    resultText.value = ''
    isDoomed.value = false
  }
  
  defineExpose({ generateResult,isDoomed })
  </script>
  
  <style scoped>
  .cyber-card {
    border: 2px solid #00ff9d;
    padding: 2rem;
    margin: 2rem auto;
    max-width: 600px;
    background: rgba(0, 0, 0, 0.7);
    box-shadow: 0 0 20px rgba(0, 255, 157, 0.3);
  }
  
  .neon-effect {
    color: #00ff9d;
    text-shadow: 0 0 10px #00ff9d;
    margin-bottom: 1.5rem;
  }
  
  .glitch-text {
    color: #ff00ff;
    animation: glitch 1s infinite;
    font-size: 1.2rem;
    padding: 1rem;
    min-height: 60px;
  }
  
  @keyframes glitch {
    0% { 
      text-shadow: 2px 0 #00ff9d;
      transform: translateX(0);
    }
    50% { 
      text-shadow: -2px 0 #ff00ff;
      transform: translateX(2px);
    }
    100% { 
      text-shadow: 2px 0 #00ff9d;
      transform: translateX(0);
    }
  }
  
  .cyber-button {
    margin-top: 1rem;
  }
  </style>